package templates

import (
  "fmt"
  "github.com/seanmorton/hledger-htmx/internal/hledger"
)

templ Budget(from, to string, items []hledger.BudgetItem) {
  <form id="dateSelect" hx-get="/budget" hx-target="main" hx-trigger="change from:#dateSelect>input" hx-push-url="true">
    <label>From</label>
    <input type="date" name="from" value={ from } />
    <label>To</label>
    <input type="date" name="to" value={ to } />
  </form>
  <table>
    <thead>
      <tr>
        <th>Account</th>
        <th>Remaining</th>
        <th>Target</th>
      </tr>
    </thead>
    <tbody>
      for _, item := range items {
        <tr hx-get={ fmt.Sprintf("/register?from=%s&to=%s&account=%s", from, to, item.Account) } hx-target="#budgetRegister">
          <td>{ item.Account }</td>
          <td>{ fmt.Sprintf("%f", item.Remaining()) }</td>
          <td>{ fmt.Sprintf("%f", item.Target) }</td>
        </tr>
      }
    </tbody>
  </table>
  <hr />
  <div id="budgetRegister">
  </div>
}

